# Plan 思考模式与 ReAct 模式对比

## 核心概念
- **Plan 思考模式**：先制定详细计划，再按步骤执行。将工作流程分为规划阶段（任务分解与路径设计）和执行阶段（逐步落实与动态调整）。
- **ReAct 模式**：边想边做，每一步都是思考→行动→观察的循环。
- **动态规划（Dynamic Planning）**：制定初始计划框架，执行中根据反馈重新规划，适用于信息不确定、需探索决策的场景。

## 要点总结
1. **Plan 模式的核心机制**
   - 规划阶段：分析整体目标，将复杂任务拆解为可管理的子任务，生成执行路线图
   - 执行阶段：按预定计划执行每个子任务，可调用工具，并根据反馈修正后续步骤

2. **Plan 模式 vs ReAct 模式**
   - ReAct：适合简单任务，但在复杂长任务中容易"迷路"
   - Plan 模式：先输出完整计划，再系统性执行，减少上下文负担，适合多步骤复杂任务

3. **动态规划场景的处理**
   - 采用 "规划-执行-重规划"（Plan-Execute-Replan）循环
   - 制定条件性计划（IF-ELIF-ELSE）
   - 基于 sub-agent 返回数据，可以回到规划阶段重新制定策略

4. **ReAct 的局限性（以北京→成都旅游为例）**
   - **贪婪停止**：看到"足够好"的方案就停止探索，从未想到查询中转方案
   - **上下文狭窄**：每步只能基于当前看到的信息做判断
   - **顺序依赖**：发现最优解靠运气（查询顺序）
   - **约束遗忘**：长链条中丢失初始约束条件

5. **触发 Plan 模式的提示词技巧**
   - 阶段隔离：用明确的"阶段一/二"分隔规划和执行
   - 禁止条款：显式禁止立即行动
   - 验收标准：给规划设定质量门槛（至少 3 种方案、风险评估等）
   - 暂停点：强制在规划完成后插入人工确认节点

## 代码示例
### 基础强制规划模板
```markdown
【任务指令】
{描述复杂任务}

【执行协议 - 强制 PLAN 模式】
阶段一：PLAN（规划）
1. 在采取任何行动之前，先输出完整的【执行计划书】
2. 计划书必须包含：任务分解、依赖关系、成功标准、信息缺口
3. 明确声明："计划完成，等待用户确认或修正后再进入执行阶段"

阶段二：EXECUTE（执行）
只有在用户回复"确认执行"后，才开始阶段二
```

### 决策优化类模板
```markdown
【决策协议】
阶段 1 - 选项空间枚举（禁止评估，只收集）：
- 直达方案：飞机、高铁、火车、大巴
- 中转方案：经 {城市 A}、经 {城市 B}、混合交通
- 组合方案：红眼航班+住宿、早班火车+当天办事

阶段 2 - 评估矩阵（并行分析）
阶段 3 - 敏感性分析
阶段 4 - 推荐与备用方案
```

## 易错点
1. 混淆静态规划和动态规划：静态规划适合步骤确定的任务，动态规划适合信息不确定的场景
2. 认为 Plan 模式不能动态调整：实际上 Plan 模式支持"规划-执行-重规划"循环
3. 忽视 ReAct 的局部最优问题：ReAct 每一步只对比已看到的选项，缺乏全局视野
4. 提示词设计不当：没有显式禁止立即行动，导致模型无法进入 Plan 模式

## 面试要点
- 理解 Plan 模式的核心优势：降低复杂任务出错率、减少 token 消耗、可解释性强
- 能够结合实际场景分析何时使用 Plan 模式 vs ReAct 模式
- 了解动态规划的实现机制：分层规划架构、条件性计划、重规划触发条件
- 掌握提示词工程技巧：如何强制模型进入 Plan 模式

---
*最后更新：2025-02-27*
